# ?뵑 un:lock Database Schema Design

??臾몄꽌??'un:lock' ?꾨줈?앺듃??PostgreSQL ?곗씠?곕쿋?댁뒪 ?ㅺ퀎 諛??뷀떚??援ъ“瑜??ㅻ챸?⑸땲??

---

## 1. ERD 援ъ“ (媛쒕뀗??

- **Users**: ?쒕퉬???댁슜???뺣낫 (移댁뭅???곕룞)
- **Couples**: 1:1 ?ъ슜??留ㅼ묶 ?뺣낫
- **Questions**: ?쇱씪 吏덈Ц ??μ냼
- **Answers**: 吏덈Ц??????ъ슜?먯쓽 ?듬? 諛??대엺 ?곹깭

---

## 2. ?뚯씠釉??곸꽭 ?ㅺ퀎

### 2.1. users
| 而щ읆紐?| ???| ?쒖빟?ы빆 | ?ㅻ챸 |
| :--- | :--- | :--- | :--- |
| id | BIGSERIAL | PRIMARY KEY | 怨좎쑀 ?앸퀎??|
| social_id | VARCHAR | - | ?뚯뀥 濡쒓렇??怨좎쑀 ?앸퀎??|
| nickname | VARCHAR | NOT NULL | ?ъ슜???됰꽕??|
| email | VARCHAR | UNIQUE, NOT NULL | ?대찓??(濡쒓렇??ID 寃몄슜) |
| password | VARCHAR | - | ?대찓??濡쒓렇?몄슜 鍮꾨?踰덊샇 |
| provider | VARCHAR | NOT NULL | KAKAO, GOOGLE, APPLE, EMAIL |
| couple_id | BIGINT | FOREIGN KEY | ?뚯냽 而ㅽ뵆 ID |
| created_at | TIMESTAMP | NOT NULL | ?앹꽦??|
| updated_at | TIMESTAMP | NOT NULL | ?섏젙??|

### 2.2. couples
| 而щ읆紐?| ???| ?쒖빟?ы빆 | ?ㅻ챸 |
| :--- | :--- | :--- | :--- |
| id | BIGSERIAL | PRIMARY KEY | 怨좎쑀 ?앸퀎??|
| user1_id | BIGINT | UNIQUE, FK | ?ъ슜??1 ID |
| user2_id | BIGINT | UNIQUE, FK | ?ъ슜??2 ID |
| start_date | DATE | NOT NULL | 而ㅽ뵆 ?쒖옉??|
| notification_time | TIME | NOT NULL, DEFAULT '22:00' | ?쇱씪 吏덈Ц ?뚮┝ ?쒓컙 |
| created_at | TIMESTAMP | NOT NULL | ?앹꽦??|
| updated_at | TIMESTAMP | NOT NULL | ?섏젙??|

### 2.3. questions
| 而щ읆紐?| ???| ?쒖빟?ы빆 | ?ㅻ챸 |
| :--- | :--- | :--- | :--- |
| id | BIGSERIAL | PRIMARY KEY | 怨좎쑀 ?앸퀎??|
| content | TEXT | NOT NULL | 吏덈Ц ?댁슜 |
| active_date | DATE | UNIQUE, NOT NULL | 吏덈Ц ?몄텧 ?좎쭨 (留ㅼ씪 ?섎굹) |
| created_at | TIMESTAMP | NOT NULL | ?앹꽦??|
| updated_at | TIMESTAMP | NOT NULL | ?섏젙??|

### 2.4. answers
| 而щ읆紐?| ???| ?쒖빟?ы빆 | ?ㅻ챸 |
| :--- | :--- | :--- | :--- |
| id | BIGSERIAL | PRIMARY KEY | 怨좎쑀 ?앸퀎??|
| question_id | BIGINT | FOREIGN KEY | 吏덈Ц ID |
| user_id | BIGINT | FOREIGN KEY | ?묒꽦??ID |
| content | TEXT | NOT NULL | ?듬? ?댁슜 |
| is_revealed | BOOLEAN | DEFAULT FALSE | ?뚰듃???듬? ?대엺沅??띾뱷 ?щ? |
| created_at | TIMESTAMP | NOT NULL | ?앹꽦??|
| updated_at | TIMESTAMP | NOT NULL | ?섏젙??|

---

## 3. ?듭떖 鍮꾩쫰?덉뒪 洹쒖튃 ?쒖빟

1. **而ㅽ뵆 ?쒖빟**: ??紐낆쓽 ?좎???諛섎뱶???섎굹??`couple_id`留?媛吏????덉쑝硫? `couples` ?뚯씠釉붿쓽 `user1_id`? `user2_id`???쒕줈 ?좊땲?ы빐???⑸땲??
2. **吏덈Ц ?몄텧**: `questions.active_date`??以묐났?????놁쑝硫? API ?몄텧 ???꾩옱 ?좎쭨(`LocalDate.now()`)???대떦?섎뒗 吏덈Ц??諛섑솚?⑸땲??
3. **?듬? ?대엺**: 
   - ?ъ슜?먭? ?듬?????ν븷 ??`is_revealed`??湲곕낯?곸쑝濡?`false`?낅땲??
   - 愿묎퀬 ?쒖껌 ?먮뒗 寃곗젣 API媛 ?깃났?곸쑝濡?泥섎━?섎㈃ `is_revealed`瑜?`true`濡??낅뜲?댄듃?⑸땲??
   - ?뚰듃?덉쓽 ?듬???議고쉶?섎뒗 API??`蹂몄씤???듬? 議댁옱 ?щ?`? `is_revealed == true` 議곌굔??紐⑤몢 留뚯”?댁빞 ?ㅼ젣 ?곗씠?곕? 諛섑솚?⑸땲??
